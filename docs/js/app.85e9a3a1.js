(function(e){function t(t){for(var n,i,l=t[0],c=t[1],o=t[2],u=0,p=[];u<l.length;u++)i=l[u],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&p.push(s[i][0]),s[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(p.length)p.shift()();return r.push.apply(r,o||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,l=1;l<a.length;l++){var c=a[l];0!==s[c]&&(n=!1)}n&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},s={app:0},r=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var o=0;o<l.length;o++)t(l[o]);var d=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var n=a("64a9"),s=a.n(n);s.a},"16a2":function(e,t,a){},"4dac":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex flex-column vh-100 avenir",attrs:{id:"app"}},[e._m(0),a("div",{staticClass:"flex flex-auto",attrs:{id:"middle"}},[a("div",{staticClass:"br b--light-gray overflow-auto shadow-4 z-1 bg-light-blue",class:{collapsed:!e.sidebarOpen},attrs:{id:"sidebar"}},[e._m(1),a("Settings"),a("FeatureInfo",{staticClass:"pa2",attrs:{selectedLegend:e.selectedLegend}}),a("Legend",{staticClass:"pa2",attrs:{selectedLegend:e.selectedLegend}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.sidebarOpen,expression:"!sidebarOpen"}],staticClass:"relative br bg-light-gray b--gray shadow-4 z-1",staticStyle:{width:"20px"},attrs:{id:"sidebar-rim"},on:{click:function(t){e.sidebarOpen=!0}}}),a("div",{staticClass:"relative flex-auto",attrs:{id:"map-container"}},[a("Map",{attrs:{selectedLegend:e.selectedLegend}}),a("img",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"absolute loading",attrs:{src:"image/loading.gif"}}),a("div",{staticClass:"absolute bg-light-gray f3 br bt bb br--right br-100 b--dark-gray bw1 mt3 magenta pointer grow pa1 z-1",attrs:{id:"sidebarToggle"},on:{click:function(t){e.sidebarOpen=!e.sidebarOpen}}},[e.sidebarOpen?e._e():a("span",[a("div",{staticClass:"icono-caretRight ml0"})]),e.sidebarOpen?a("span",[a("div",{staticClass:"icono-caretLeft ml0"})]):e._e()])],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.sidebarOpen,expression:"sidebarOpen"}],staticClass:"bt b--light-gray flex-none lh-solid ph2 pt3 pb1bg-washed-blue tc",attrs:{id:"bottom"}},[e._m(2),e._m(3)])])},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bb b--gray bg-lightest-blue pa1",attrs:{id:"top"}},[a("img",{staticClass:"logo fl ma2",attrs:{src:"image/logo.jpg"}}),a("h1",{staticClass:"f1 ma2"},[e._v("台灣人口指標地圖")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bg-lightest-blue ma0 pa1",attrs:{id:"mobile-header"}},[a("img",{staticClass:"logo f5 mh1 mv2 fl",attrs:{src:"image/logo.jpg"}}),a("h1",{staticClass:"f3 mv2"},[e._v("人口指標地圖")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",{staticClass:"ma0"},[a("b",[e._v("資料來源: ")]),e._v("社會經濟資料庫")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("製作 "),a("a",{attrs:{href:"https://twitter.com/stevage1"}},[e._v("林佳賢")]),e._v(".  "),a("a",{attrs:{href:"https://github.com/imdataman/vue-mapbox-map"}},[e._v("Github.")])])}],i=(a("7514"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"absolute absolute--fill",attrs:{id:"map"}})}),l=[],c=(a("96cf"),a("3b8d")),o=a("e192"),d=a.n(o),u=a("b2e9"),p=a("d217"),f=new n["a"],g=(a("ac6d"),{data:function(){return{selectedId:void 0,theme:"P_DEN",map:{}}},props:{selectedLegend:Object},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,a,n,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=[9,12],a={version:8,name:"Blank",center:[0,0],zoom:0,sources:{},layers:[{id:"background",type:"background",paint:{"background-color":"white"}}],id:"blank",glyphs:"http://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},n=new d.a.Map({container:"map",center:[120.973882,23.57565],zoom:6.5,style:a}),window.map=n,this.map=n,n.on("load",Object(c["a"])(regeneratorRuntime.mark((function e(){var a,r,i,l,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"]("data/county.json");case 2:return a=e.sent,e.next=5,u["a"]("data/town.json");case 5:return r=e.sent,e.next=8,u["a"]("data/village.json");case 8:i=e.sent,l=p["a"](a,a.objects.county),c=p["a"](r,r.objects.town),o=p["a"](i,i.objects.village),n.addSource("county",{type:"geojson",data:l}),n.addLayer({id:"countyPolygon",source:"county",maxzoom:t[0],type:"fill",paint:{"fill-color":["step",["get",s.theme],s.selectedLegend.palette[0],s.selectedLegend.breaks[1],s.selectedLegend.palette[1],s.selectedLegend.breaks[2],s.selectedLegend.palette[2],s.selectedLegend.breaks[3],s.selectedLegend.palette[3],s.selectedLegend.breaks[4],s.selectedLegend.palette[4],s.selectedLegend.breaks[5],s.selectedLegend.palette[5],s.selectedLegend.breaks[6],s.selectedLegend.palette[6],s.selectedLegend.breaks[7],s.selectedLegend.palette[7]],"fill-opacity":.8,"fill-outline-color":["case",["boolean",["feature-state","selected"],!1],"rgba(0, 0, 0, 1)","rgba(0, 0, 0, 0)"]}}),n.addSource("town",{type:"geojson",data:c}),n.addLayer({id:"townPolygon",source:"town",minzoom:t[0],maxzoom:t[1],type:"fill",paint:{"fill-color":["step",["get","P_DEN"],"#bdbdbd",1,"#f7fbff",250,"#deebf7",500,"#c6dbef",1e3,"#9ecae1",2500,"#6baed6",5e3,"#4292c6",1e4,"#2171b5",25e3,"#084594"],"fill-opacity":.8,"fill-outline-color":["case",["boolean",["feature-state","selected"],!1],"rgba(0, 0, 0, 1)","rgba(0, 0, 0, 0)"]}}),n.addSource("village",{type:"geojson",data:o}),n.addLayer({id:"villagePolygon",source:"village",minzoom:t[1],type:"fill",paint:{"fill-color":["step",["get","P_DEN"],"#bdbdbd",1,"#f7fbff",500,"#deebf7",1e3,"#c6dbef",2500,"#9ecae1",5e3,"#6baed6",1e4,"#4292c6",25e3,"#2171b5",5e4,"#084594"],"fill-opacity":.8,"fill-outline-color":["case",["boolean",["feature-state","selected"],!1],"rgba(0, 0, 0, 1)","rgba(0, 0, 0, 0)"]}}),f.$emit("loading-finished"),n.on("click","countyPolygon",(function(e){f.$emit("feature-clicked",e.features[0])})),n.on("click","townPolygon",(function(e){f.$emit("feature-clicked",e.features[0])})),n.on("click","villagePolygon",(function(e){f.$emit("feature-clicked",e.features[0])})),f.$on("change-theme",(function(e){s.theme=e.type})),n.on("mousemove","countyPolygon",(function(){return n.getCanvas().style.cursor="pointer"})),n.on("mousemove","townPolygon",(function(){return n.getCanvas().style.cursor="pointer"})),n.on("mousemove","villagePolygon",(function(){return n.getCanvas().style.cursor="pointer"})),n.on("mouseleave","countyPolygon",(function(){return n.getCanvas().style.cursor=""})),n.on("mouseleave","townPolygon",(function(){return n.getCanvas().style.cursor=""})),n.on("mouseleave","villagePolygon",(function(){return n.getCanvas().style.cursor=""}));case 29:case"end":return e.stop()}}),e)}))));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),watch:{selectedLegend:function(){this.map.setPaintProperty("countyPolygon","fill-color",["step",["get",this.selectedLegend.type],this.selectedLegend.palette[0],this.selectedLegend.breaks[1],this.selectedLegend.palette[1],this.selectedLegend.breaks[2],this.selectedLegend.palette[2],this.selectedLegend.breaks[3],this.selectedLegend.palette[3],this.selectedLegend.breaks[4],this.selectedLegend.palette[4],this.selectedLegend.breaks[5],this.selectedLegend.palette[5],this.selectedLegend.breaks[6],this.selectedLegend.palette[6],this.selectedLegend.breaks[7],this.selectedLegend.palette[7]]),this.map.setPaintProperty("townPolygon","fill-color",["step",["get",this.selectedLegend.type],this.selectedLegend.palette[0],this.selectedLegend.breaks[1],this.selectedLegend.palette[1],this.selectedLegend.breaks[2],this.selectedLegend.palette[2],this.selectedLegend.breaks[3],this.selectedLegend.palette[3],this.selectedLegend.breaks[4],this.selectedLegend.palette[4],this.selectedLegend.breaks[5],this.selectedLegend.palette[5],this.selectedLegend.breaks[6],this.selectedLegend.palette[6],this.selectedLegend.breaks[7],this.selectedLegend.palette[7]]),this.map.setPaintProperty("villagePolygon","fill-color",["step",["get",this.selectedLegend.type],this.selectedLegend.palette[0],this.selectedLegend.breaks[1],this.selectedLegend.palette[1],this.selectedLegend.breaks[2],this.selectedLegend.palette[2],this.selectedLegend.breaks[3],this.selectedLegend.palette[3],this.selectedLegend.breaks[4],this.selectedLegend.palette[4],this.selectedLegend.breaks[5],this.selectedLegend.palette[5],this.selectedLegend.breaks[6],this.selectedLegend.palette[6],this.selectedLegend.breaks[7],this.selectedLegend.palette[7]])}}}),b=g,h=a("2877"),m=Object(h["a"])(b,i,l,!1,null,"535121e0",null),v=m.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.feature,expression:"feature"}],staticClass:"b--black ba pv2 ph3 bg-white ma2",attrs:{id:"FeatureInfo"}},[a("h3",{staticClass:"f4 ml4-l"},[e._v(e._s(e.p.NAME||"(Unnamed item)"))]),a("p",{staticClass:"f4 ml4-l"},[e._v(e._s(e.p[e.theme]+e.selectedLegend.unit))])])},L=[],_={name:"FeatureInfo",data:function(){return{feature:void 0,theme:"P_DEN"}},props:{selectedLegend:Object},computed:{p:function(){return this.feature&&this.feature.properties||{}}},created:function(){var e=this;f.$on("feature-clicked",(function(t){f.$emit("select-feature",t),e.feature=t})),f.$on("change-theme",(function(t){e.theme=t.type}))}},k=_,w=(a("8aba"),Object(h["a"])(k,y,L,!1,null,"b5958e0c",null)),C=w.exports,P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pa2 mb3",attrs:{id:"Settings"}},[a("h4",{staticClass:"tc mv3 f3-l"},[e._v("請選擇資料")]),a("div",{staticClass:"list pl0 measure center"},[e._l(e.listItem,(function(t){return[a("a",{staticClass:"db link pv3 ba br1 bg-white mb1 tc pointer hover-orange f3-l",class:{active:t.name==e.choosed.name},on:{click:function(a){return e.chooseTheme(t)}}},[e._v(e._s(t.name))])]}))],2)])},x=[],O={name:"Settings",data:function(){return{listItem:[{name:"人口密度",type:"P_DEN"},{name:"性別比例",type:"M_F_RAT"},{name:"家戶平均人口",type:"P_H_CNT"},{name:"老化指數",type:"FLD4"}],choosed:{name:"人口密度",type:"P_DEN"}}},methods:{chooseTheme:function(e){e.type!=this.choosed.type&&(this.choosed=e,f.$emit("change-theme",e))}}},j=O,$=(a("9e7d"),Object(h["a"])(j,P,x,!1,null,"15a231be",null)),E=$.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.feature,expression:"feature"}],staticClass:"ph2 pt3 pb2 b--black ba pa2 bg-white ma2",attrs:{id:"Legend"}},[e._l(e.selectedLegend.palette,(function(t,n){return[a("div",{staticClass:"flex pl4-l"},[a("div",{staticClass:"ba br1 mb2",style:{backgroundColor:t,width:"30px",height:"30px"}}),a("p",{staticClass:"flex-auto mv2 tl ml3"},[e._v(e._s(e.selectedLegend.breaks[n].toString()+" - "+e.selectedLegend.breaks[n+1].toString()))])])]}))],2)},S=[],D={name:"Legend",data:function(){return{feature:void 0,theme:"P_DEN"}},props:{selectedLegend:Object},computed:{p:function(){return this.feature&&this.feature.properties||{}}},created:function(){var e=this;f.$on("feature-clicked",(function(t){f.$emit("select-feature",t),e.feature=t})),f.$on("change-theme",(function(t){e.theme=t.type}))}},T=D,z=(a("7e98"),Object(h["a"])(T,N,S,!1,null,"7cf1950e",null)),M=z.exports,F={name:"app",components:{Map:v,FeatureInfo:C,Settings:E,Legend:M},data:function(){return{sidebarOpen:!0,loading:!1,theme:"P_DEN",legend:[{breaks:[0,100,250,500,1e3,2500,5e3,1e4,""],palette:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],type:"P_DEN",unit:"人／km²"},{breaks:[0,85,90,95,100,105,110,115,""],palette:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],type:"M_F_RAT",unit:"男／100女"},{breaks:[0,2,2.2,2.4,2.6,2.8,3,3.2,""],palette:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],type:"P_H_CNT",unit:"人／家戶"},{breaks:[0,80,100,120,140,160,180,200,""],palette:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],type:"FLD4",unit:""}]}},computed:{selectedLegend:function(){var e=this;return this.legend.find((function(t){return t.type==e.theme}))}},watch:{sidebarOpen:function(){this.$nextTick((function(){return window.map.resize()}))}},created:function(){var e=this;f.$on("select-feature",(function(){return e.sidebarOpen=!0})),f.$on("change-theme",(function(t){return e.theme=t.type})),f.$on("loading-finished",(function(){return e.loading=!0}))}};a("948e");var I=F,R=(a("034f"),Object(h["a"])(I,s,r,!1,null,null,null)),A=R.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(A)}}).$mount("#app")},"64a9":function(e,t,a){},"7e98":function(e,t,a){"use strict";var n=a("16a2"),s=a.n(n);s.a},"8aba":function(e,t,a){"use strict";var n=a("4dac"),s=a.n(n);s.a},"9e7d":function(e,t,a){"use strict";var n=a("ff87"),s=a.n(n);s.a},ff87:function(e,t,a){}});
//# sourceMappingURL=app.85e9a3a1.js.map